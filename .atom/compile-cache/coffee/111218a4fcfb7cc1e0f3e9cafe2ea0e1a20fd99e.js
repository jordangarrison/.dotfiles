(function() {
  var ExposeTabView, path;

  path = require('path');

  ExposeTabView = require('../lib/expose-tab-view');

  describe("ExposeTabView", function() {
    var workspaceElement;
    workspaceElement = null;
    beforeEach(function() {
      workspaceElement = atom.views.getView(atom.workspace);
      return atom.project.setPaths([path.join(__dirname, 'fixtures')]);
    });
    describe("populateTabBody()", function() {
      it("can populate empty item", function() {
        var exposeTabView;
        exposeTabView = new ExposeTabView;
        expect(Object.getOwnPropertyNames(exposeTabView.item)).toHaveLength(0);
        expect(exposeTabView.find('.title').text()).toBe('untitled');
        expect(exposeTabView.tabBody.find('a')).toHaveLength(1);
        expect(exposeTabView.tabBody.find('a').attr('class')).toContain('text');
        return expect(exposeTabView.pending).toBe(false);
      });
      it("populates normal text editor", function() {
        waitsForPromise(function() {
          return atom.workspace.open('sample1.txt');
        });
        return runs(function() {
          var exposeTabView, item;
          item = atom.workspace.getActivePaneItem();
          exposeTabView = new ExposeTabView(item);
          expect(exposeTabView.item).toBeDefined();
          expect(exposeTabView.title).toBe('sample1.txt');
          expect(exposeTabView.tabBody.find('a')).toHaveLength(1);
          return expect(exposeTabView.tabBody.find('a').attr('class')).toContain('code');
        });
      });
      it("populates image editor", function() {
        waitsForPromise(function() {
          atom.packages.activatePackage('image-view');
          return atom.workspace.open('../../screenshots/preview.png');
        });
        return runs(function() {
          var exposeTabView, item;
          item = atom.workspace.getActivePaneItem();
          exposeTabView = new ExposeTabView(item);
          expect(exposeTabView.item).toBeDefined();
          expect(exposeTabView.title).toBe('preview.png');
          expect(exposeTabView.tabBody.find('img')).toHaveLength(1);
          return expect(exposeTabView.tabBody.find('img').attr('src')).toBeDefined();
        });
      });
      it("populates settings view", function() {
        waitsForPromise(function() {
          jasmine.attachToDOM(workspaceElement);
          return atom.packages.activatePackage('settings-view');
        });
        return runs(function() {
          atom.commands.dispatch(workspaceElement, 'settings-view:open');
          waitsFor(function() {
            return atom.workspace.getActivePaneItem();
          });
          return runs(function() {
            var exposeTabView, item;
            item = atom.workspace.getActivePaneItem();
            exposeTabView = new ExposeTabView(item);
            expect(exposeTabView.title).toBe('Settings');
            expect(exposeTabView.tabBody.find('a')).toHaveLength(1);
            return expect(exposeTabView.tabBody.find('a').attr('class')).toContain('tools');
          });
        });
      });
      it("populates archive view", function() {
        waitsForPromise(function() {
          atom.packages.activatePackage('archive-view');
          return atom.workspace.open('archive.zip');
        });
        return runs(function() {
          var exposeTabView, item;
          item = atom.workspace.getActivePaneItem();
          exposeTabView = new ExposeTabView(item);
          expect(exposeTabView.title).toBe('archive.zip');
          expect(exposeTabView.tabBody.find('a')).toHaveLength(1);
          return expect(exposeTabView.tabBody.find('a').attr('class')).toContain('zip');
        });
      });
      it("populates markdown view", function() {
        waitsForPromise(function() {
          atom.packages.activatePackage('markdown-preview');
          return atom.workspace.open('../../README.md');
        });
        return runs(function() {
          var item;
          item = null;
          atom.commands.dispatch(workspaceElement, 'markdown-preview:toggle');
          waitsFor(function() {
            return item = atom.workspace.getPaneItems()[1];
          });
          return runs(function() {
            var exposeTabView;
            exposeTabView = new ExposeTabView(item);
            expect(exposeTabView.title).toBe('README.md Preview');
            expect(exposeTabView.tabBody.find('a')).toHaveLength(1);
            return expect(exposeTabView.tabBody.find('a').attr('class')).toContain('markdown');
          });
        });
      });
      it("populates text editor with minimap activated", function() {
        waitsForPromise(function() {
          atom.packages.activatePackage('minimap');
          jasmine.attachToDOM(workspaceElement);
          return atom.workspace.open('sample1.txt');
        });
        return runs(function() {
          var exposeTabView, item;
          item = atom.workspace.getActivePaneItem();
          exposeTabView = new ExposeTabView(item);
          waitsFor(function() {
            return exposeTabView.tabBody.html();
          });
          return runs(function() {
            expect(exposeTabView.item).toBeDefined();
            expect(exposeTabView.title).toBe('sample1.txt');
            return expect(exposeTabView.tabBody.find('atom-text-editor-minimap')).toHaveLength(1);
          });
        });
      });
      return it("marks pending tabs", function() {
        waitsForPromise(function() {
          return atom.workspace.open('sample1.txt', {
            pending: true
          });
        });
        return runs(function() {
          var exposeTabView, item;
          item = atom.workspace.getActivePaneItem();
          exposeTabView = new ExposeTabView(item);
          expect(exposeTabView.title).toBe('sample1.txt');
          return expect(exposeTabView.pending).toBe(true);
        });
      });
    });
    describe("closeTab()", function() {
      return it("destroys selected tab item", function() {
        waitsForPromise(function() {
          return atom.workspace.open('sample1.txt');
        });
        return runs(function() {
          var exposeTabView, item;
          item = atom.workspace.getActivePaneItem();
          exposeTabView = new ExposeTabView(item);
          expect(atom.workspace.getTextEditors()).toHaveLength(1);
          expect(exposeTabView.title).toBe('sample1.txt');
          expect(exposeTabView.disposables.disposed).toBeFalsy();
          exposeTabView.closeTab();
          expect(atom.workspace.getTextEditors()).toHaveLength(0);
          return expect(exposeTabView.disposables.disposed).toBeTruthy();
        });
      });
    });
    return describe("activateTab()", function() {
      return it("activates selected tab item", function() {
        waitsForPromise(function() {
          atom.workspace.open('sample1.txt');
          return atom.workspace.open('sample2.txt');
        });
        return runs(function() {
          var activeItem, exposeTabView, items;
          items = atom.workspace.getPaneItems();
          activeItem = atom.workspace.getActivePaneItem();
          exposeTabView = new ExposeTabView(items[0]);
          expect(items).toHaveLength(2);
          expect(activeItem.getTitle()).toBe('sample2.txt');
          expect(exposeTabView.title).toBe('sample1.txt');
          exposeTabView.activateTab();
          activeItem = atom.workspace.getActivePaneItem();
          return expect(activeItem.getTitle()).toBe('sample1.txt');
        });
      });
    });
  });

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvamdhcnJpc29uLy5hdG9tL3BhY2thZ2VzL2V4cG9zZS9zcGVjL2V4cG9zZS10YWItdmlldy1zcGVjLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBLE1BQUE7O0VBQUEsSUFBQSxHQUFPLE9BQUEsQ0FBUSxNQUFSOztFQUVQLGFBQUEsR0FBZ0IsT0FBQSxDQUFRLHdCQUFSOztFQUVoQixRQUFBLENBQVMsZUFBVCxFQUEwQixTQUFBO0FBQ3hCLFFBQUE7SUFBQSxnQkFBQSxHQUFtQjtJQUVuQixVQUFBLENBQVcsU0FBQTtNQUNULGdCQUFBLEdBQW1CLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBWCxDQUFtQixJQUFJLENBQUMsU0FBeEI7YUFDbkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFiLENBQXNCLENBQUMsSUFBSSxDQUFDLElBQUwsQ0FBVSxTQUFWLEVBQXFCLFVBQXJCLENBQUQsQ0FBdEI7SUFGUyxDQUFYO0lBSUEsUUFBQSxDQUFTLG1CQUFULEVBQThCLFNBQUE7TUFDNUIsRUFBQSxDQUFHLHlCQUFILEVBQThCLFNBQUE7QUFDNUIsWUFBQTtRQUFBLGFBQUEsR0FBZ0IsSUFBSTtRQUNwQixNQUFBLENBQU8sTUFBTSxDQUFDLG1CQUFQLENBQTJCLGFBQWEsQ0FBQyxJQUF6QyxDQUFQLENBQXNELENBQUMsWUFBdkQsQ0FBb0UsQ0FBcEU7UUFDQSxNQUFBLENBQU8sYUFBYSxDQUFDLElBQWQsQ0FBbUIsUUFBbkIsQ0FBNEIsQ0FBQyxJQUE3QixDQUFBLENBQVAsQ0FBMkMsQ0FBQyxJQUE1QyxDQUFpRCxVQUFqRDtRQUNBLE1BQUEsQ0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQXRCLENBQTJCLEdBQTNCLENBQVAsQ0FBdUMsQ0FBQyxZQUF4QyxDQUFxRCxDQUFyRDtRQUNBLE1BQUEsQ0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQXRCLENBQTJCLEdBQTNCLENBQStCLENBQUMsSUFBaEMsQ0FBcUMsT0FBckMsQ0FBUCxDQUFxRCxDQUFDLFNBQXRELENBQWdFLE1BQWhFO2VBQ0EsTUFBQSxDQUFPLGFBQWEsQ0FBQyxPQUFyQixDQUE2QixDQUFDLElBQTlCLENBQW1DLEtBQW5DO01BTjRCLENBQTlCO01BUUEsRUFBQSxDQUFHLDhCQUFILEVBQW1DLFNBQUE7UUFDakMsZUFBQSxDQUFnQixTQUFBO2lCQUNkLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBZixDQUFvQixhQUFwQjtRQURjLENBQWhCO2VBRUEsSUFBQSxDQUFLLFNBQUE7QUFDSCxjQUFBO1VBQUEsSUFBQSxHQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWYsQ0FBQTtVQUNQLGFBQUEsR0FBb0IsSUFBQSxhQUFBLENBQWMsSUFBZDtVQUVwQixNQUFBLENBQU8sYUFBYSxDQUFDLElBQXJCLENBQTBCLENBQUMsV0FBM0IsQ0FBQTtVQUNBLE1BQUEsQ0FBTyxhQUFhLENBQUMsS0FBckIsQ0FBMkIsQ0FBQyxJQUE1QixDQUFpQyxhQUFqQztVQUNBLE1BQUEsQ0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQXRCLENBQTJCLEdBQTNCLENBQVAsQ0FBdUMsQ0FBQyxZQUF4QyxDQUFxRCxDQUFyRDtpQkFDQSxNQUFBLENBQU8sYUFBYSxDQUFDLE9BQU8sQ0FBQyxJQUF0QixDQUEyQixHQUEzQixDQUErQixDQUFDLElBQWhDLENBQXFDLE9BQXJDLENBQVAsQ0FBcUQsQ0FBQyxTQUF0RCxDQUFnRSxNQUFoRTtRQVBHLENBQUw7TUFIaUMsQ0FBbkM7TUFZQSxFQUFBLENBQUcsd0JBQUgsRUFBNkIsU0FBQTtRQUMzQixlQUFBLENBQWdCLFNBQUE7VUFDZCxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWQsQ0FBOEIsWUFBOUI7aUJBQ0EsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFmLENBQW9CLCtCQUFwQjtRQUZjLENBQWhCO2VBR0EsSUFBQSxDQUFLLFNBQUE7QUFDSCxjQUFBO1VBQUEsSUFBQSxHQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWYsQ0FBQTtVQUNQLGFBQUEsR0FBb0IsSUFBQSxhQUFBLENBQWMsSUFBZDtVQUVwQixNQUFBLENBQU8sYUFBYSxDQUFDLElBQXJCLENBQTBCLENBQUMsV0FBM0IsQ0FBQTtVQUNBLE1BQUEsQ0FBTyxhQUFhLENBQUMsS0FBckIsQ0FBMkIsQ0FBQyxJQUE1QixDQUFpQyxhQUFqQztVQUNBLE1BQUEsQ0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQXRCLENBQTJCLEtBQTNCLENBQVAsQ0FBeUMsQ0FBQyxZQUExQyxDQUF1RCxDQUF2RDtpQkFDQSxNQUFBLENBQU8sYUFBYSxDQUFDLE9BQU8sQ0FBQyxJQUF0QixDQUEyQixLQUEzQixDQUFpQyxDQUFDLElBQWxDLENBQXVDLEtBQXZDLENBQVAsQ0FBcUQsQ0FBQyxXQUF0RCxDQUFBO1FBUEcsQ0FBTDtNQUoyQixDQUE3QjtNQWFBLEVBQUEsQ0FBRyx5QkFBSCxFQUE4QixTQUFBO1FBQzVCLGVBQUEsQ0FBZ0IsU0FBQTtVQUNkLE9BQU8sQ0FBQyxXQUFSLENBQW9CLGdCQUFwQjtpQkFDQSxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWQsQ0FBOEIsZUFBOUI7UUFGYyxDQUFoQjtlQUdBLElBQUEsQ0FBSyxTQUFBO1VBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFkLENBQXVCLGdCQUF2QixFQUF5QyxvQkFBekM7VUFDQSxRQUFBLENBQVMsU0FBQTttQkFDUCxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFmLENBQUE7VUFETyxDQUFUO2lCQUVBLElBQUEsQ0FBSyxTQUFBO0FBQ0gsZ0JBQUE7WUFBQSxJQUFBLEdBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBZixDQUFBO1lBQ1AsYUFBQSxHQUFvQixJQUFBLGFBQUEsQ0FBYyxJQUFkO1lBRXBCLE1BQUEsQ0FBTyxhQUFhLENBQUMsS0FBckIsQ0FBMkIsQ0FBQyxJQUE1QixDQUFpQyxVQUFqQztZQUNBLE1BQUEsQ0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQXRCLENBQTJCLEdBQTNCLENBQVAsQ0FBdUMsQ0FBQyxZQUF4QyxDQUFxRCxDQUFyRDttQkFDQSxNQUFBLENBQU8sYUFBYSxDQUFDLE9BQU8sQ0FBQyxJQUF0QixDQUEyQixHQUEzQixDQUErQixDQUFDLElBQWhDLENBQXFDLE9BQXJDLENBQVAsQ0FBcUQsQ0FBQyxTQUF0RCxDQUFnRSxPQUFoRTtVQU5HLENBQUw7UUFKRyxDQUFMO01BSjRCLENBQTlCO01BZ0JBLEVBQUEsQ0FBRyx3QkFBSCxFQUE2QixTQUFBO1FBQzNCLGVBQUEsQ0FBZ0IsU0FBQTtVQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZCxDQUE4QixjQUE5QjtpQkFDQSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQWYsQ0FBb0IsYUFBcEI7UUFGYyxDQUFoQjtlQUdBLElBQUEsQ0FBSyxTQUFBO0FBQ0gsY0FBQTtVQUFBLElBQUEsR0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFmLENBQUE7VUFDUCxhQUFBLEdBQW9CLElBQUEsYUFBQSxDQUFjLElBQWQ7VUFFcEIsTUFBQSxDQUFPLGFBQWEsQ0FBQyxLQUFyQixDQUEyQixDQUFDLElBQTVCLENBQWlDLGFBQWpDO1VBQ0EsTUFBQSxDQUFPLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBdEIsQ0FBMkIsR0FBM0IsQ0FBUCxDQUF1QyxDQUFDLFlBQXhDLENBQXFELENBQXJEO2lCQUNBLE1BQUEsQ0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQXRCLENBQTJCLEdBQTNCLENBQStCLENBQUMsSUFBaEMsQ0FBcUMsT0FBckMsQ0FBUCxDQUFxRCxDQUFDLFNBQXRELENBQWdFLEtBQWhFO1FBTkcsQ0FBTDtNQUoyQixDQUE3QjtNQVlBLEVBQUEsQ0FBRyx5QkFBSCxFQUE4QixTQUFBO1FBQzVCLGVBQUEsQ0FBZ0IsU0FBQTtVQUNkLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZCxDQUE4QixrQkFBOUI7aUJBQ0EsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFmLENBQW9CLGlCQUFwQjtRQUZjLENBQWhCO2VBR0EsSUFBQSxDQUFLLFNBQUE7QUFDSCxjQUFBO1VBQUEsSUFBQSxHQUFPO1VBQ1AsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFkLENBQXVCLGdCQUF2QixFQUF5Qyx5QkFBekM7VUFFQSxRQUFBLENBQVMsU0FBQTttQkFDUCxJQUFBLEdBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFmLENBQUEsQ0FBOEIsQ0FBQSxDQUFBO1VBRDlCLENBQVQ7aUJBRUEsSUFBQSxDQUFLLFNBQUE7QUFDSCxnQkFBQTtZQUFBLGFBQUEsR0FBb0IsSUFBQSxhQUFBLENBQWMsSUFBZDtZQUNwQixNQUFBLENBQU8sYUFBYSxDQUFDLEtBQXJCLENBQTJCLENBQUMsSUFBNUIsQ0FBaUMsbUJBQWpDO1lBQ0EsTUFBQSxDQUFPLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBdEIsQ0FBMkIsR0FBM0IsQ0FBUCxDQUF1QyxDQUFDLFlBQXhDLENBQXFELENBQXJEO21CQUNBLE1BQUEsQ0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQXRCLENBQTJCLEdBQTNCLENBQStCLENBQUMsSUFBaEMsQ0FBcUMsT0FBckMsQ0FBUCxDQUFxRCxDQUFDLFNBQXRELENBQWdFLFVBQWhFO1VBSkcsQ0FBTDtRQU5HLENBQUw7TUFKNEIsQ0FBOUI7TUFnQkEsRUFBQSxDQUFHLDhDQUFILEVBQW1ELFNBQUE7UUFDakQsZUFBQSxDQUFnQixTQUFBO1VBQ2QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFkLENBQThCLFNBQTlCO1VBQ0EsT0FBTyxDQUFDLFdBQVIsQ0FBb0IsZ0JBQXBCO2lCQUNBLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBZixDQUFvQixhQUFwQjtRQUhjLENBQWhCO2VBSUEsSUFBQSxDQUFLLFNBQUE7QUFDSCxjQUFBO1VBQUEsSUFBQSxHQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWYsQ0FBQTtVQUNQLGFBQUEsR0FBb0IsSUFBQSxhQUFBLENBQWMsSUFBZDtVQUVwQixRQUFBLENBQVMsU0FBQTttQkFDUCxhQUFhLENBQUMsT0FBTyxDQUFDLElBQXRCLENBQUE7VUFETyxDQUFUO2lCQUVBLElBQUEsQ0FBSyxTQUFBO1lBQ0gsTUFBQSxDQUFPLGFBQWEsQ0FBQyxJQUFyQixDQUEwQixDQUFDLFdBQTNCLENBQUE7WUFDQSxNQUFBLENBQU8sYUFBYSxDQUFDLEtBQXJCLENBQTJCLENBQUMsSUFBNUIsQ0FBaUMsYUFBakM7bUJBQ0EsTUFBQSxDQUFPLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBdEIsQ0FBMkIsMEJBQTNCLENBQVAsQ0FBOEQsQ0FBQyxZQUEvRCxDQUE0RSxDQUE1RTtVQUhHLENBQUw7UUFORyxDQUFMO01BTGlELENBQW5EO2FBZ0JBLEVBQUEsQ0FBRyxvQkFBSCxFQUF5QixTQUFBO1FBQ3ZCLGVBQUEsQ0FBZ0IsU0FBQTtpQkFDZCxJQUFJLENBQUMsU0FBUyxDQUFDLElBQWYsQ0FBb0IsYUFBcEIsRUFBbUM7WUFBQSxPQUFBLEVBQVMsSUFBVDtXQUFuQztRQURjLENBQWhCO2VBRUEsSUFBQSxDQUFLLFNBQUE7QUFDSCxjQUFBO1VBQUEsSUFBQSxHQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWYsQ0FBQTtVQUNQLGFBQUEsR0FBb0IsSUFBQSxhQUFBLENBQWMsSUFBZDtVQUVwQixNQUFBLENBQU8sYUFBYSxDQUFDLEtBQXJCLENBQTJCLENBQUMsSUFBNUIsQ0FBaUMsYUFBakM7aUJBQ0EsTUFBQSxDQUFPLGFBQWEsQ0FBQyxPQUFyQixDQUE2QixDQUFDLElBQTlCLENBQW1DLElBQW5DO1FBTEcsQ0FBTDtNQUh1QixDQUF6QjtJQTlGNEIsQ0FBOUI7SUF3R0EsUUFBQSxDQUFTLFlBQVQsRUFBdUIsU0FBQTthQUNyQixFQUFBLENBQUcsNEJBQUgsRUFBaUMsU0FBQTtRQUMvQixlQUFBLENBQWdCLFNBQUE7aUJBQ2QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFmLENBQW9CLGFBQXBCO1FBRGMsQ0FBaEI7ZUFFQSxJQUFBLENBQUssU0FBQTtBQUNILGNBQUE7VUFBQSxJQUFBLEdBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBZixDQUFBO1VBQ1AsYUFBQSxHQUFvQixJQUFBLGFBQUEsQ0FBYyxJQUFkO1VBRXBCLE1BQUEsQ0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWYsQ0FBQSxDQUFQLENBQXVDLENBQUMsWUFBeEMsQ0FBcUQsQ0FBckQ7VUFDQSxNQUFBLENBQU8sYUFBYSxDQUFDLEtBQXJCLENBQTJCLENBQUMsSUFBNUIsQ0FBaUMsYUFBakM7VUFDQSxNQUFBLENBQU8sYUFBYSxDQUFDLFdBQVcsQ0FBQyxRQUFqQyxDQUEwQyxDQUFDLFNBQTNDLENBQUE7VUFFQSxhQUFhLENBQUMsUUFBZCxDQUFBO1VBRUEsTUFBQSxDQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBZixDQUFBLENBQVAsQ0FBdUMsQ0FBQyxZQUF4QyxDQUFxRCxDQUFyRDtpQkFDQSxNQUFBLENBQU8sYUFBYSxDQUFDLFdBQVcsQ0FBQyxRQUFqQyxDQUEwQyxDQUFDLFVBQTNDLENBQUE7UUFYRyxDQUFMO01BSCtCLENBQWpDO0lBRHFCLENBQXZCO1dBaUJBLFFBQUEsQ0FBUyxlQUFULEVBQTBCLFNBQUE7YUFDeEIsRUFBQSxDQUFHLDZCQUFILEVBQWtDLFNBQUE7UUFDaEMsZUFBQSxDQUFnQixTQUFBO1VBQ2QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFmLENBQW9CLGFBQXBCO2lCQUNBLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBZixDQUFvQixhQUFwQjtRQUZjLENBQWhCO2VBR0EsSUFBQSxDQUFLLFNBQUE7QUFDSCxjQUFBO1VBQUEsS0FBQSxHQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBZixDQUFBO1VBQ1IsVUFBQSxHQUFhLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWYsQ0FBQTtVQUNiLGFBQUEsR0FBb0IsSUFBQSxhQUFBLENBQWMsS0FBTSxDQUFBLENBQUEsQ0FBcEI7VUFFcEIsTUFBQSxDQUFPLEtBQVAsQ0FBYSxDQUFDLFlBQWQsQ0FBMkIsQ0FBM0I7VUFDQSxNQUFBLENBQU8sVUFBVSxDQUFDLFFBQVgsQ0FBQSxDQUFQLENBQTZCLENBQUMsSUFBOUIsQ0FBbUMsYUFBbkM7VUFDQSxNQUFBLENBQU8sYUFBYSxDQUFDLEtBQXJCLENBQTJCLENBQUMsSUFBNUIsQ0FBaUMsYUFBakM7VUFFQSxhQUFhLENBQUMsV0FBZCxDQUFBO1VBQ0EsVUFBQSxHQUFhLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWYsQ0FBQTtpQkFFYixNQUFBLENBQU8sVUFBVSxDQUFDLFFBQVgsQ0FBQSxDQUFQLENBQTZCLENBQUMsSUFBOUIsQ0FBbUMsYUFBbkM7UUFaRyxDQUFMO01BSmdDLENBQWxDO0lBRHdCLENBQTFCO0VBaEl3QixDQUExQjtBQUpBIiwic291cmNlc0NvbnRlbnQiOlsicGF0aCA9IHJlcXVpcmUgJ3BhdGgnXG5cbkV4cG9zZVRhYlZpZXcgPSByZXF1aXJlICcuLi9saWIvZXhwb3NlLXRhYi12aWV3J1xuXG5kZXNjcmliZSBcIkV4cG9zZVRhYlZpZXdcIiwgLT5cbiAgd29ya3NwYWNlRWxlbWVudCA9IG51bGxcblxuICBiZWZvcmVFYWNoIC0+XG4gICAgd29ya3NwYWNlRWxlbWVudCA9IGF0b20udmlld3MuZ2V0VmlldyhhdG9tLndvcmtzcGFjZSlcbiAgICBhdG9tLnByb2plY3Quc2V0UGF0aHMgW3BhdGguam9pbihfX2Rpcm5hbWUsICdmaXh0dXJlcycpXVxuXG4gIGRlc2NyaWJlIFwicG9wdWxhdGVUYWJCb2R5KClcIiwgLT5cbiAgICBpdCBcImNhbiBwb3B1bGF0ZSBlbXB0eSBpdGVtXCIsIC0+XG4gICAgICBleHBvc2VUYWJWaWV3ID0gbmV3IEV4cG9zZVRhYlZpZXdcbiAgICAgIGV4cGVjdChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhleHBvc2VUYWJWaWV3Lml0ZW0pKS50b0hhdmVMZW5ndGggMFxuICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcuZmluZCgnLnRpdGxlJykudGV4dCgpKS50b0JlICd1bnRpdGxlZCdcbiAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3LnRhYkJvZHkuZmluZCgnYScpKS50b0hhdmVMZW5ndGggMVxuICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGFiQm9keS5maW5kKCdhJykuYXR0cignY2xhc3MnKSkudG9Db250YWluICd0ZXh0J1xuICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcucGVuZGluZykudG9CZSBmYWxzZVxuXG4gICAgaXQgXCJwb3B1bGF0ZXMgbm9ybWFsIHRleHQgZWRpdG9yXCIsIC0+XG4gICAgICB3YWl0c0ZvclByb21pc2UgLT5cbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub3BlbiAnc2FtcGxlMS50eHQnXG4gICAgICBydW5zIC0+XG4gICAgICAgIGl0ZW0gPSBhdG9tLndvcmtzcGFjZS5nZXRBY3RpdmVQYW5lSXRlbSgpXG4gICAgICAgIGV4cG9zZVRhYlZpZXcgPSBuZXcgRXhwb3NlVGFiVmlldyhpdGVtKVxuXG4gICAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3Lml0ZW0pLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGl0bGUpLnRvQmUgJ3NhbXBsZTEudHh0J1xuICAgICAgICBleHBlY3QoZXhwb3NlVGFiVmlldy50YWJCb2R5LmZpbmQoJ2EnKSkudG9IYXZlTGVuZ3RoIDFcbiAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGFiQm9keS5maW5kKCdhJykuYXR0cignY2xhc3MnKSkudG9Db250YWluICdjb2RlJ1xuXG4gICAgaXQgXCJwb3B1bGF0ZXMgaW1hZ2UgZWRpdG9yXCIsIC0+XG4gICAgICB3YWl0c0ZvclByb21pc2UgLT5cbiAgICAgICAgYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UgJ2ltYWdlLXZpZXcnXG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9wZW4gJy4uLy4uL3NjcmVlbnNob3RzL3ByZXZpZXcucG5nJ1xuICAgICAgcnVucyAtPlxuICAgICAgICBpdGVtID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZUl0ZW0oKVxuICAgICAgICBleHBvc2VUYWJWaWV3ID0gbmV3IEV4cG9zZVRhYlZpZXcoaXRlbSlcblxuICAgICAgICBleHBlY3QoZXhwb3NlVGFiVmlldy5pdGVtKS50b0JlRGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3LnRpdGxlKS50b0JlICdwcmV2aWV3LnBuZydcbiAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGFiQm9keS5maW5kKCdpbWcnKSkudG9IYXZlTGVuZ3RoIDFcbiAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGFiQm9keS5maW5kKCdpbWcnKS5hdHRyKCdzcmMnKSkudG9CZURlZmluZWQoKVxuXG4gICAgaXQgXCJwb3B1bGF0ZXMgc2V0dGluZ3Mgdmlld1wiLCAtPlxuICAgICAgd2FpdHNGb3JQcm9taXNlIC0+XG4gICAgICAgIGphc21pbmUuYXR0YWNoVG9ET00od29ya3NwYWNlRWxlbWVudClcbiAgICAgICAgYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UgJ3NldHRpbmdzLXZpZXcnXG4gICAgICBydW5zIC0+XG4gICAgICAgIGF0b20uY29tbWFuZHMuZGlzcGF0Y2ggd29ya3NwYWNlRWxlbWVudCwgJ3NldHRpbmdzLXZpZXc6b3BlbidcbiAgICAgICAgd2FpdHNGb3IgLT5cbiAgICAgICAgICBhdG9tLndvcmtzcGFjZS5nZXRBY3RpdmVQYW5lSXRlbSgpXG4gICAgICAgIHJ1bnMgLT5cbiAgICAgICAgICBpdGVtID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZUl0ZW0oKVxuICAgICAgICAgIGV4cG9zZVRhYlZpZXcgPSBuZXcgRXhwb3NlVGFiVmlldyhpdGVtKVxuXG4gICAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGl0bGUpLnRvQmUgJ1NldHRpbmdzJ1xuICAgICAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3LnRhYkJvZHkuZmluZCgnYScpKS50b0hhdmVMZW5ndGggMVxuICAgICAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3LnRhYkJvZHkuZmluZCgnYScpLmF0dHIoJ2NsYXNzJykpLnRvQ29udGFpbiAndG9vbHMnXG5cbiAgICBpdCBcInBvcHVsYXRlcyBhcmNoaXZlIHZpZXdcIiwgLT5cbiAgICAgIHdhaXRzRm9yUHJvbWlzZSAtPlxuICAgICAgICBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZSAnYXJjaGl2ZS12aWV3J1xuICAgICAgICBhdG9tLndvcmtzcGFjZS5vcGVuICdhcmNoaXZlLnppcCdcbiAgICAgIHJ1bnMgLT5cbiAgICAgICAgaXRlbSA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVBhbmVJdGVtKClcbiAgICAgICAgZXhwb3NlVGFiVmlldyA9IG5ldyBFeHBvc2VUYWJWaWV3KGl0ZW0pXG5cbiAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGl0bGUpLnRvQmUgJ2FyY2hpdmUuemlwJ1xuICAgICAgICBleHBlY3QoZXhwb3NlVGFiVmlldy50YWJCb2R5LmZpbmQoJ2EnKSkudG9IYXZlTGVuZ3RoIDFcbiAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGFiQm9keS5maW5kKCdhJykuYXR0cignY2xhc3MnKSkudG9Db250YWluICd6aXAnXG5cbiAgICBpdCBcInBvcHVsYXRlcyBtYXJrZG93biB2aWV3XCIsIC0+XG4gICAgICB3YWl0c0ZvclByb21pc2UgLT5cbiAgICAgICAgYXRvbS5wYWNrYWdlcy5hY3RpdmF0ZVBhY2thZ2UgJ21hcmtkb3duLXByZXZpZXcnXG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9wZW4gJy4uLy4uL1JFQURNRS5tZCdcbiAgICAgIHJ1bnMgLT5cbiAgICAgICAgaXRlbSA9IG51bGxcbiAgICAgICAgYXRvbS5jb21tYW5kcy5kaXNwYXRjaCB3b3Jrc3BhY2VFbGVtZW50LCAnbWFya2Rvd24tcHJldmlldzp0b2dnbGUnXG5cbiAgICAgICAgd2FpdHNGb3IgLT5cbiAgICAgICAgICBpdGVtID0gYXRvbS53b3Jrc3BhY2UuZ2V0UGFuZUl0ZW1zKClbMV1cbiAgICAgICAgcnVucyAtPlxuICAgICAgICAgIGV4cG9zZVRhYlZpZXcgPSBuZXcgRXhwb3NlVGFiVmlldyhpdGVtKVxuICAgICAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3LnRpdGxlKS50b0JlICdSRUFETUUubWQgUHJldmlldydcbiAgICAgICAgICBleHBlY3QoZXhwb3NlVGFiVmlldy50YWJCb2R5LmZpbmQoJ2EnKSkudG9IYXZlTGVuZ3RoIDFcbiAgICAgICAgICBleHBlY3QoZXhwb3NlVGFiVmlldy50YWJCb2R5LmZpbmQoJ2EnKS5hdHRyKCdjbGFzcycpKS50b0NvbnRhaW4gJ21hcmtkb3duJ1xuXG4gICAgaXQgXCJwb3B1bGF0ZXMgdGV4dCBlZGl0b3Igd2l0aCBtaW5pbWFwIGFjdGl2YXRlZFwiLCAtPlxuICAgICAgd2FpdHNGb3JQcm9taXNlIC0+XG4gICAgICAgIGF0b20ucGFja2FnZXMuYWN0aXZhdGVQYWNrYWdlICdtaW5pbWFwJ1xuICAgICAgICBqYXNtaW5lLmF0dGFjaFRvRE9NKHdvcmtzcGFjZUVsZW1lbnQpXG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9wZW4gJ3NhbXBsZTEudHh0J1xuICAgICAgcnVucyAtPlxuICAgICAgICBpdGVtID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZUl0ZW0oKVxuICAgICAgICBleHBvc2VUYWJWaWV3ID0gbmV3IEV4cG9zZVRhYlZpZXcoaXRlbSlcblxuICAgICAgICB3YWl0c0ZvciAtPlxuICAgICAgICAgIGV4cG9zZVRhYlZpZXcudGFiQm9keS5odG1sKClcbiAgICAgICAgcnVucyAtPlxuICAgICAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3Lml0ZW0pLnRvQmVEZWZpbmVkKClcbiAgICAgICAgICBleHBlY3QoZXhwb3NlVGFiVmlldy50aXRsZSkudG9CZSAnc2FtcGxlMS50eHQnXG4gICAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGFiQm9keS5maW5kKCdhdG9tLXRleHQtZWRpdG9yLW1pbmltYXAnKSkudG9IYXZlTGVuZ3RoIDFcblxuICAgIGl0IFwibWFya3MgcGVuZGluZyB0YWJzXCIsIC0+XG4gICAgICB3YWl0c0ZvclByb21pc2UgLT5cbiAgICAgICAgYXRvbS53b3Jrc3BhY2Uub3Blbignc2FtcGxlMS50eHQnLCBwZW5kaW5nOiB0cnVlKVxuICAgICAgcnVucyAtPlxuICAgICAgICBpdGVtID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZUl0ZW0oKVxuICAgICAgICBleHBvc2VUYWJWaWV3ID0gbmV3IEV4cG9zZVRhYlZpZXcoaXRlbSlcblxuICAgICAgICBleHBlY3QoZXhwb3NlVGFiVmlldy50aXRsZSkudG9CZSAnc2FtcGxlMS50eHQnXG4gICAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3LnBlbmRpbmcpLnRvQmUgdHJ1ZVxuXG4gIGRlc2NyaWJlIFwiY2xvc2VUYWIoKVwiLCAtPlxuICAgIGl0IFwiZGVzdHJveXMgc2VsZWN0ZWQgdGFiIGl0ZW1cIiwgLT5cbiAgICAgIHdhaXRzRm9yUHJvbWlzZSAtPlxuICAgICAgICBhdG9tLndvcmtzcGFjZS5vcGVuICdzYW1wbGUxLnR4dCdcbiAgICAgIHJ1bnMgLT5cbiAgICAgICAgaXRlbSA9IGF0b20ud29ya3NwYWNlLmdldEFjdGl2ZVBhbmVJdGVtKClcbiAgICAgICAgZXhwb3NlVGFiVmlldyA9IG5ldyBFeHBvc2VUYWJWaWV3KGl0ZW0pXG5cbiAgICAgICAgZXhwZWN0KGF0b20ud29ya3NwYWNlLmdldFRleHRFZGl0b3JzKCkpLnRvSGF2ZUxlbmd0aCAxXG4gICAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3LnRpdGxlKS50b0JlICdzYW1wbGUxLnR4dCdcbiAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcuZGlzcG9zYWJsZXMuZGlzcG9zZWQpLnRvQmVGYWxzeSgpXG5cbiAgICAgICAgZXhwb3NlVGFiVmlldy5jbG9zZVRhYigpXG5cbiAgICAgICAgZXhwZWN0KGF0b20ud29ya3NwYWNlLmdldFRleHRFZGl0b3JzKCkpLnRvSGF2ZUxlbmd0aCAwXG4gICAgICAgIGV4cGVjdChleHBvc2VUYWJWaWV3LmRpc3Bvc2FibGVzLmRpc3Bvc2VkKS50b0JlVHJ1dGh5KClcblxuICBkZXNjcmliZSBcImFjdGl2YXRlVGFiKClcIiwgLT5cbiAgICBpdCBcImFjdGl2YXRlcyBzZWxlY3RlZCB0YWIgaXRlbVwiLCAtPlxuICAgICAgd2FpdHNGb3JQcm9taXNlIC0+XG4gICAgICAgIGF0b20ud29ya3NwYWNlLm9wZW4gJ3NhbXBsZTEudHh0J1xuICAgICAgICBhdG9tLndvcmtzcGFjZS5vcGVuICdzYW1wbGUyLnR4dCdcbiAgICAgIHJ1bnMgLT5cbiAgICAgICAgaXRlbXMgPSBhdG9tLndvcmtzcGFjZS5nZXRQYW5lSXRlbXMoKVxuICAgICAgICBhY3RpdmVJdGVtID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZUl0ZW0oKVxuICAgICAgICBleHBvc2VUYWJWaWV3ID0gbmV3IEV4cG9zZVRhYlZpZXcoaXRlbXNbMF0pXG5cbiAgICAgICAgZXhwZWN0KGl0ZW1zKS50b0hhdmVMZW5ndGggMlxuICAgICAgICBleHBlY3QoYWN0aXZlSXRlbS5nZXRUaXRsZSgpKS50b0JlICdzYW1wbGUyLnR4dCdcbiAgICAgICAgZXhwZWN0KGV4cG9zZVRhYlZpZXcudGl0bGUpLnRvQmUgJ3NhbXBsZTEudHh0J1xuXG4gICAgICAgIGV4cG9zZVRhYlZpZXcuYWN0aXZhdGVUYWIoKVxuICAgICAgICBhY3RpdmVJdGVtID0gYXRvbS53b3Jrc3BhY2UuZ2V0QWN0aXZlUGFuZUl0ZW0oKVxuXG4gICAgICAgIGV4cGVjdChhY3RpdmVJdGVtLmdldFRpdGxlKCkpLnRvQmUgJ3NhbXBsZTEudHh0J1xuIl19
