function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

/** @babel */

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

require('./spec-helpers');

var _libLogger = require('../lib/logger');

var _libLogger2 = _interopRequireDefault(_libLogger);

var _libWerkzeug = require('../lib/werkzeug');

var _libWerkzeug2 = _interopRequireDefault(_libWerkzeug);

describe('Logger', function () {
  var logger = undefined,
      counts = undefined;

  beforeEach(function () {
    logger = new _libLogger2['default']();
  });

  describe('getMessages', function () {
    beforeEach(function () {
      logger.info();
      logger.warning();
      logger.error();
    });

    it('verifies no messages filtered when logging level set to info', function () {
      atom.config.set('latex.loggingLevel', 'info');
      counts = _lodash2['default'].countBy(logger.getMessages(), 'type');

      expect(counts.error).toBeDefined();
      expect(counts.warning).toBeDefined();
      expect(counts.info).toBeDefined();
    });

    it('verifies info messages filtered when logging level set to warning', function () {
      atom.config.set('latex.loggingLevel', 'warning');
      counts = _lodash2['default'].countBy(logger.getMessages(), 'type');

      expect(counts.error).toBeDefined();
      expect(counts.warning).toBeDefined();
      expect(counts.info).toBeUndefined();
    });

    it('verifies warning and info messages filtered when logging level set to error', function () {
      atom.config.set('latex.loggingLevel', 'error');
      counts = _lodash2['default'].countBy(logger.getMessages(), 'type');

      expect(counts.error).toBeDefined();
      expect(counts.warning).toBeUndefined();
      expect(counts.info).toBeUndefined();
    });

    it('verifies no messages filtered when useFilters is false', function () {
      atom.config.set('latex.loggingLevel', 'error');
      counts = _lodash2['default'].countBy(logger.getMessages(false), 'type');

      expect(counts.error).toBeDefined();
      expect(counts.warning).toBeDefined();
      expect(counts.info).toBeDefined();
    });
  });

  describe('messageTypeIsVisible', function () {
    it('verifies messageTypeIsVisible is true for all levels when logging level set to info', function () {
      atom.config.set('latex.loggingLevel', 'info');

      expect(logger.messageTypeIsVisible('info')).toBe(true);
      expect(logger.messageTypeIsVisible('warning')).toBe(true);
      expect(logger.messageTypeIsVisible('error')).toBe(true);
    });

    it('verifies messageTypeIsVisible is false for info when logging level set to warning', function () {
      atom.config.set('latex.loggingLevel', 'warning');

      expect(logger.messageTypeIsVisible('info')).toBe(false);
      expect(logger.messageTypeIsVisible('warning')).toBe(true);
      expect(logger.messageTypeIsVisible('error')).toBe(true);
    });

    it('verifies messageTypeIsVisible is false for info when logging level set to warning', function () {
      atom.config.set('latex.loggingLevel', 'error');

      expect(logger.messageTypeIsVisible('info')).toBe(false);
      expect(logger.messageTypeIsVisible('warning')).toBe(false);
      expect(logger.messageTypeIsVisible('error')).toBe(true);
    });
  });

  describe('sync', function () {
    var logDock = undefined;

    function initializeSpies(filePath, position) {
      logDock = jasmine.createSpyObj('LogDock', ['update']);
      spyOn(logger, 'show').andCallFake(function () {
        return Promise.resolve(logDock);
      });
      spyOn(_libWerkzeug2['default'], 'getEditorDetails').andReturn({ filePath: filePath, position: position });
    }

    it('silently does nothing when the current editor is transient', function () {
      initializeSpies(null, null);

      waitsForPromise(function () {
        return logger.sync();
      });

      runs(function () {
        expect(logger.show).not.toHaveBeenCalled();
        expect(logDock.update).not.toHaveBeenCalled();
      });
    });

    it('shows and updates the log panel with the file path and position', function () {
      var filePath = 'file.tex';
      var position = [[0, 0], [0, 10]];

      initializeSpies(filePath, position);

      waitsForPromise(function () {
        return logger.sync();
      });

      runs(function () {
        expect(logger.show).toHaveBeenCalled();
        expect(logDock.update).toHaveBeenCalledWith({ filePath: filePath, position: position });
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2pnYXJyaXNvbi8uYXRvbS9wYWNrYWdlcy9sYXRleC9zcGVjL2xvZ2dlci1zcGVjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7c0JBRWMsUUFBUTs7OztRQUNmLGdCQUFnQjs7eUJBQ0osZUFBZTs7OzsyQkFDYixpQkFBaUI7Ozs7QUFFdEMsUUFBUSxDQUFDLFFBQVEsRUFBRSxZQUFNO0FBQ3ZCLE1BQUksTUFBTSxZQUFBO01BQUUsTUFBTSxZQUFBLENBQUE7O0FBRWxCLFlBQVUsQ0FBQyxZQUFNO0FBQ2YsVUFBTSxHQUFHLDRCQUFZLENBQUE7R0FDdEIsQ0FBQyxDQUFBOztBQUVGLFVBQVEsQ0FBQyxhQUFhLEVBQUUsWUFBTTtBQUM1QixjQUFVLENBQUMsWUFBTTtBQUNmLFlBQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQTtBQUNiLFlBQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQTtBQUNoQixZQUFNLENBQUMsS0FBSyxFQUFFLENBQUE7S0FDZixDQUFDLENBQUE7O0FBRUYsTUFBRSxDQUFDLDhEQUE4RCxFQUFFLFlBQU07QUFDdkUsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLEVBQUUsTUFBTSxDQUFDLENBQUE7QUFDN0MsWUFBTSxHQUFHLG9CQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUE7O0FBRWhELFlBQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUE7QUFDbEMsWUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQTtBQUNwQyxZQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFBO0tBQ2xDLENBQUMsQ0FBQTs7QUFFRixNQUFFLENBQUMsbUVBQW1FLEVBQUUsWUFBTTtBQUM1RSxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsRUFBRSxTQUFT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QUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLENBQUE7QUFDMUMsY0FBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQTtPQUM5QyxDQUFDLENBQUE7S0FDSCxDQUFDLENBQUE7O0FBRUYsTUFBRSxDQUFDLGlFQUFpRSxFQUFFLFlBQU07QUFDMUUsVUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFBO0FBQzNCLFVBQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQTs7QUFFbEMscUJBQWUsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUE7O0FBRW5DLHFCQUFlLENBQUM7ZUFBTSxNQUFNLENBQUMsSUFBSSxFQUFFO09BQUEsQ0FBQyxDQUFBOztBQUVwQyxVQUFJLENBQUMsWUFBTTtBQUNULGNBQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQTtBQUN0QyxjQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLG9CQUFvQixDQUFDLEVBQUUsUUFBUSxFQUFSLFFBQVEsRUFBRSxRQUFRLEVBQVIsUUFBUSxFQUFFLENBQUMsQ0FBQTtPQUNwRSxDQUFDLENBQUE7S0FDSCxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7Q0FDSCxDQUFDLENBQUEiLCJmaWxlIjoiL2hvbWUvamdhcnJpc29uLy5hdG9tL3BhY2thZ2VzL2xhdGV4L3NwZWMvbG9nZ2VyLXNwZWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiogQGJhYmVsICovXG5cbmltcG9ydCBfIGZyb20gJ2xvZGFzaCdcbmltcG9ydCAnLi9zcGVjLWhlbHBlcnMnXG5pbXBvcnQgTG9nZ2VyIGZyb20gJy4uL2xpYi9sb2dnZXInXG5pbXBvcnQgd2Vya3pldWcgZnJvbSAnLi4vbGliL3dlcmt6ZXVnJ1xuXG5kZXNjcmliZSgnTG9nZ2VyJywgKCkgPT4ge1xuICBsZXQgbG9nZ2VyLCBjb3VudHNcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBsb2dnZXIgPSBuZXcgTG9nZ2VyKClcbiAgfSlcblxuICBkZXNjcmliZSgnZ2V0TWVzc2FnZXMnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbygpXG4gICAgICBsb2dnZXIud2FybmluZygpXG4gICAgICBsb2dnZXIuZXJyb3IoKVxuICAgIH0pXG5cbiAgICBpdCgndmVyaWZpZXMgbm8gbWVzc2FnZXMgZmlsdGVyZWQgd2hlbiBsb2dnaW5nIGxldmVsIHNldCB0byBpbmZvJywgKCkgPT4ge1xuICAgICAgYXRvbS5jb25maWcuc2V0KCdsYXRleC5sb2dnaW5nTGV2ZWwnLCAnaW5mbycpXG4gICAgICBjb3VudHMgPSBfLmNvdW50QnkobG9nZ2VyLmdldE1lc3NhZ2VzKCksICd0eXBlJylcblxuICAgICAgZXhwZWN0KGNvdW50cy5lcnJvcikudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KGNvdW50cy53YXJuaW5nKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QoY291bnRzLmluZm8pLnRvQmVEZWZpbmVkKClcbiAgICB9KVxuXG4gICAgaXQoJ3ZlcmlmaWVzIGluZm8gbWVzc2FnZXMgZmlsdGVyZWQgd2hlbiBsb2dnaW5nIGxldmVsIHNldCB0byB3YXJuaW5nJywgKCkgPT4ge1xuICAgICAgYXRvbS5jb25maWcuc2V0KCdsYXRleC5sb2dnaW5nTGV2ZWwnLCAnd2FybmluZycpXG4gICAgICBjb3VudHMgPSBfLmNvdW50QnkobG9nZ2VyLmdldE1lc3NhZ2VzKCksICd0eXBlJylcblxuICAgICAgZXhwZWN0KGNvdW50cy5lcnJvcikudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KGNvdW50cy53YXJuaW5nKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QoY291bnRzLmluZm8pLnRvQmVVbmRlZmluZWQoKVxuICAgIH0pXG5cbiAgICBpdCgndmVyaWZpZXMgd2FybmluZyBhbmQgaW5mbyBtZXNzYWdlcyBmaWx0ZXJlZCB3aGVuIGxvZ2dpbmcgbGV2ZWwgc2V0IHRvIGVycm9yJywgKCkgPT4ge1xuICAgICAgYXRvbS5jb25maWcuc2V0KCdsYXRleC5sb2dnaW5nTGV2ZWwnLCAnZXJyb3InKVxuICAgICAgY291bnRzID0gXy5jb3VudEJ5KGxvZ2dlci5nZXRNZXNzYWdlcygpLCAndHlwZScpXG5cbiAgICAgIGV4cGVjdChjb3VudHMuZXJyb3IpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChjb3VudHMud2FybmluZykudG9CZVVuZGVmaW5lZCgpXG4gICAgICBleHBlY3QoY291bnRzLmluZm8pLnRvQmVVbmRlZmluZWQoKVxuICAgIH0pXG5cbiAgICBpdCgndmVyaWZpZXMgbm8gbWVzc2FnZXMgZmlsdGVyZWQgd2hlbiB1c2VGaWx0ZXJzIGlzIGZhbHNlJywgKCkgPT4ge1xuICAgICAgYXRvbS5jb25maWcuc2V0KCdsYXRleC5sb2dnaW5nTGV2ZWwnLCAnZXJyb3InKVxuICAgICAgY291bnRzID0gXy5jb3VudEJ5KGxvZ2dlci5nZXRNZXNzYWdlcyhmYWxzZSksICd0eXBlJylcblxuICAgICAgZXhwZWN0KGNvdW50cy5lcnJvcikudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KGNvdW50cy53YXJuaW5nKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QoY291bnRzLmluZm8pLnRvQmVEZWZpbmVkKClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdtZXNzYWdlVHlwZUlzVmlzaWJsZScsICgpID0+IHtcbiAgICBpdCgndmVyaWZpZXMgbWVzc2FnZVR5cGVJc1Zpc2libGUgaXMgdHJ1ZSBmb3IgYWxsIGxldmVscyB3aGVuIGxvZ2dpbmcgbGV2ZWwgc2V0IHRvIGluZm8nLCAoKSA9PiB7XG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xhdGV4LmxvZ2dpbmdMZXZlbCcsICdpbmZvJylcblxuICAgICAgZXhwZWN0KGxvZ2dlci5tZXNzYWdlVHlwZUlzVmlzaWJsZSgnaW5mbycpKS50b0JlKHRydWUpXG4gICAgICBleHBlY3QobG9nZ2VyLm1lc3NhZ2VUeXBlSXNWaXNpYmxlKCd3YXJuaW5nJykpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChsb2dnZXIubWVzc2FnZVR5cGVJc1Zpc2libGUoJ2Vycm9yJykpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgaXQoJ3ZlcmlmaWVzIG1lc3NhZ2VUeXBlSXNWaXNpYmxlIGlzIGZhbHNlIGZvciBpbmZvIHdoZW4gbG9nZ2luZyBsZXZlbCBzZXQgdG8gd2FybmluZycsICgpID0+IHtcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGF0ZXgubG9nZ2luZ0xldmVsJywgJ3dhcm5pbmcnKVxuXG4gICAgICBleHBlY3QobG9nZ2VyLm1lc3NhZ2VUeXBlSXNWaXNpYmxlKCdpbmZvJykpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QobG9nZ2VyLm1lc3NhZ2VUeXBlSXNWaXNpYmxlKCd3YXJuaW5nJykpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChsb2dnZXIubWVzc2FnZVR5cGVJc1Zpc2libGUoJ2Vycm9yJykpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgaXQoJ3ZlcmlmaWVzIG1lc3NhZ2VUeXBlSXNWaXNpYmxlIGlzIGZhbHNlIGZvciBpbmZvIHdoZW4gbG9nZ2luZyBsZXZlbCBzZXQgdG8gd2FybmluZycsICgpID0+IHtcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGF0ZXgubG9nZ2luZ0xldmVsJywgJ2Vycm9yJylcblxuICAgICAgZXhwZWN0KGxvZ2dlci5tZXNzYWdlVHlwZUlzVmlzaWJsZSgnaW5mbycpKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KGxvZ2dlci5tZXNzYWdlVHlwZUlzVmlzaWJsZSgnd2FybmluZycpKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KGxvZ2dlci5tZXNzYWdlVHlwZUlzVmlzaWJsZSgnZXJyb3InKSkudG9CZSh0cnVlKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ3N5bmMnLCAoKSA9PiB7XG4gICAgbGV0IGxvZ0RvY2tcblxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVTcGllcyAoZmlsZVBhdGgsIHBvc2l0aW9uKSB7XG4gICAgICBsb2dEb2NrID0gamFzbWluZS5jcmVhdGVTcHlPYmooJ0xvZ0RvY2snLCBbJ3VwZGF0ZSddKVxuICAgICAgc3B5T24obG9nZ2VyLCAnc2hvdycpLmFuZENhbGxGYWtlKCgpID0+IFByb21pc2UucmVzb2x2ZShsb2dEb2NrKSlcbiAgICAgIHNweU9uKHdlcmt6ZXVnLCAnZ2V0RWRpdG9yRGV0YWlscycpLmFuZFJldHVybih7IGZpbGVQYXRoLCBwb3NpdGlvbiB9KVxuICAgIH1cblxuICAgIGl0KCdzaWxlbnRseSBkb2VzIG5vdGhpbmcgd2hlbiB0aGUgY3VycmVudCBlZGl0b3IgaXMgdHJhbnNpZW50JywgKCkgPT4ge1xuICAgICAgaW5pdGlhbGl6ZVNwaWVzKG51bGwsIG51bGwpXG5cbiAgICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiBsb2dnZXIuc3luYygpKVxuXG4gICAgICBydW5zKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KGxvZ2dlci5zaG93KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgICAgIGV4cGVjdChsb2dEb2NrLnVwZGF0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3dzIGFuZCB1cGRhdGVzIHRoZSBsb2cgcGFuZWwgd2l0aCB0aGUgZmlsZSBwYXRoIGFuZCBwb3NpdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gJ2ZpbGUudGV4J1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBbWzAsIDBdLCBbMCwgMTBdXVxuXG4gICAgICBpbml0aWFsaXplU3BpZXMoZmlsZVBhdGgsIHBvc2l0aW9uKVxuXG4gICAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4gbG9nZ2VyLnN5bmMoKSlcblxuICAgICAgcnVucygoKSA9PiB7XG4gICAgICAgIGV4cGVjdChsb2dnZXIuc2hvdykudG9IYXZlQmVlbkNhbGxlZCgpXG4gICAgICAgIGV4cGVjdChsb2dEb2NrLnVwZGF0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoeyBmaWxlUGF0aCwgcG9zaXRpb24gfSlcbiAgICAgIH0pXG4gICAgfSlcbiAgfSlcbn0pXG4iXX0=