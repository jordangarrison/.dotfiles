Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }

var _lodash = require('lodash');

var _ = _interopRequireWildcard(_lodash);

var _atom = require('atom');

'use babel';

var Main = {
  disposables: null,
  languageListView: null,

  createLanguageListView: function createLanguageListView() {
    if (!this.languageListView) {
      var LanguageListView = require('./language-list-view');
      this.languageListView = new LanguageListView();
    }
    this.languageListView.toggle();
  },

  activate: function activate() {
    this.disposables = new _atom.CompositeDisposable();

    function warn() {
      atom.notifications.addWarning('spell-check package is enabled', { detail: 'spell-check and linter-spell will spell check the same\ndocuments and spell-check will interfere with linter-spell.\nPlease disable the spell-check package. If you do not want\nto see this warning you can disable it in the settings\nfor linter-spell.' });
    }

    if (atom.config.get('linter-spell.checkForSpellCheck') && atom.packages.isPackageActive('spell-check')) warn();

    atom.packages.onDidActivatePackage(function (p) {
      if (atom.config.get('linter-spell.checkForSpellCheck') && p.name === 'spell-check') warn();
    });

    var DictionaryProvider = require('./dictionary-provider');
    global.dictionaryProvider = new DictionaryProvider();
    this.disposables.add(global.dictionaryProvider);

    var LanguageManager = require('./language-manager');
    global.languageManager = new LanguageManager();
    this.disposables.add(global.languageManager);

    var GrammarManager = require('./grammar-manager');
    global.grammarManager = new GrammarManager();
    this.disposables.add(global.grammarManager);

    var DictionaryManager = require('./dictionary-manager');
    global.dictionaryManager = new DictionaryManager();
    this.disposables.add(global.dictionaryManager);

    global.providers = require('./providers');

    this.disposables.add(atom.commands.add('atom-text-editor', 'linter-spell:show-language-selector', this.createLanguageListView));

    require('atom-package-deps').install('linter-spell').then(function () {
      console.log('All dependencies installed, good to go');
    });
  },

  deactivate: function deactivate() {
    this.disposables.dispose();
  },

  consumeGrammar: function consumeGrammar(grammars) {
    return global.grammarManager.consumeGrammar(grammars);
  },

  consumeDictionary: function consumeDictionary(dictionaries) {
    return global.dictionaryManager.consumeDictionary(dictionaries);
  },

  consumeLinter: function consumeLinter(linter) {
    global.linter = linter;
    return new _atom.Disposable(function () {
      global.linter = null;
    });
  },

  consumeStatusBar: function consumeStatusBar(statusBar) {
    var LanguageStatusView = require('./language-status-view');
    var languageStatusView = new LanguageStatusView();
    languageStatusView.initialize(statusBar);
    return new _atom.Disposable(function () {
      languageStatusView.destroy();
    });
  },

  provideGrammar: function provideGrammar() {
    return global.providers.provideGrammar();
  },

  provideDictionary: function provideDictionary() {
    var _this = this;

    var wordList = require('linter-spell-word-list');

    var wordLists = [{
      name: 'plain text',
      keyPath: 'linter-spell.plainTextWords',
      grammarScopes: ['text.plain', 'text.plain.null-grammar']
    }, {
      name: 'GIT commit',
      keyPath: 'linter-spell.gitCommitWords',
      grammarScopes: ['text.git-commit']
    }, {
      name: 'AsciiDoc',
      keyPath: 'linter-spell.asciiDocWords',
      grammarScopes: ['source.asciidoc']
    }, {
      name: 'Markdown',
      keyPath: 'linter-spell.markdownWords',
      grammarScopes: ['source.gfm', 'text.md']
    }];

    return _.concat([global.dictionaryProvider.provideDictionary()], _.map(wordLists, function (opt) {
      var a = new wordList.ConfigWordList(opt);
      _this.disposables.add(a);
      return a.provideDictionary();
    }));
  },

  provideLinter: function provideLinter() {
    return global.providers.provideLinter();
  }

};

exports['default'] = Main;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2pnYXJyaXNvbi8uYXRvbS9wYWNrYWdlcy9saW50ZXItc3BlbGwvbGliL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3NCQUVtQixRQUFROztJQUFmLENBQUM7O29CQUNtQyxNQUFNOztBQUh0RCxXQUFXLENBQUE7O0FBS1gsSUFBTSxJQUFJLEdBQUc7QUFDWCxhQUFXLEVBQUUsSUFBSTtBQUNqQixrQkFBZ0IsRUFBRSxJQUFJOztBQUV0Qix3QkFBc0IsRUFBRSxrQ0FBRztBQUN6QixRQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFO0FBQzFCLFVBQUksZ0JBQWdCLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUE7QUFDdEQsVUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksZ0JBQWdCLEVBQUUsQ0FBQTtLQUMvQztBQUNELFFBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQTtHQUMvQjs7QUFFRCxVQUFRLEVBQUMsb0JBQUc7QUFDVixRQUFJLENBQUMsV0FBVyxHQUFHLCtCQUF5QixDQUFBOztBQUU1QyxhQUFTLElBQUksR0FBSTtBQUNmLFVBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLGdDQUFnQyxFQUM5RCxFQUFFLE1BQU0sRUFBRSw0UEFBNFAsRUFBRSxDQUFDLENBQUE7S0FDMVE7O0FBRUQsUUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLGFBQWEsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFBOztBQUU5RyxRQUFJLENBQUMsUUFBUSxDQUFDLG9CQUFvQixDQUFDLFVBQUEsQ0FBQyxFQUFJO0FBQUUsVUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEtBQUssYUFBYSxFQUFFLElBQUksRUFBRSxDQUFBO0tBQUUsQ0FB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LFVBQUksRUFBRSxZQUFZO0FBQ2xCLGFBQU8sRUFBRSw2QkFBNkI7QUFDdEMsbUJBQWEsRUFBRSxDQUNiLFlBQVksRUFDWix5QkFBeUIsQ0FDMUI7S0FDRixFQUFFO0FBQ0QsVUFBSSxFQUFFLFlBQVk7QUFDbEIsYUFBTyxFQUFFLDZCQUE2QjtBQUN0QyxtQkFBYSxFQUFFLENBQ2IsaUJBQWlCLENBQ2xCO0tBQ0YsRUFBRTtBQUNELFVBQUksRUFBRSxVQUFVO0FBQ2hCLGFBQU8sRUFBRSw0QkFBNEI7QUFDckMsbUJBQWEsRUFBRSxDQUNiLGlCQUFpQixDQUNsQjtLQUNGLEVBQUU7QUFDRCxVQUFJLEVBQUUsVUFBVTtBQUNoQixhQUFPLEVBQUUsNEJBQTRCO0FBQ3JDLG1CQUFhLEVBQUUsQ0FDYixZQUFZLEVBQ1osU0FBUyxDQUNWO0tBQ0YsQ0FBQyxDQUFBOztBQUVGLFdBQU8sQ0FBQyxDQUFDLE1BQU0sQ0FDYixDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLEVBQy9DLENBQUMsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLFVBQUEsR0FBRyxFQUFJO0FBQ3RCLFVBQUksQ0FBQyxHQUFHLElBQUksUUFBUSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUN4QyxZQUFLLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUE7QUFDdkIsYUFBTyxDQUFDLENBQUMsaUJBQWlCLEVBQUUsQ0FBQTtLQUM3QixDQUFDLENBQUMsQ0FBQTtHQUNOOztBQUVELGVBQWEsRUFBQyx5QkFBRztBQUNmLFdBQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsQ0FBQTtHQUN4Qzs7Q0FFRixDQUFBOztxQkFFYyxJQUFJIiwiZmlsZSI6Ii9ob21lL2pnYXJyaXNvbi8uYXRvbS9wYWNrYWdlcy9saW50ZXItc3BlbGwvbGliL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJ1xuXG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCdcbmltcG9ydCB7IERpc3Bvc2FibGUsIENvbXBvc2l0ZURpc3Bvc2FibGUgfSBmcm9tICdhdG9tJ1xuXG5jb25zdCBNYWluID0ge1xuICBkaXNwb3NhYmxlczogbnVsbCxcbiAgbGFuZ3VhZ2VMaXN0VmlldzogbnVsbCxcblxuICBjcmVhdGVMYW5ndWFnZUxpc3RWaWV3ICAoKSB7XG4gICAgaWYgKCF0aGlzLmxhbmd1YWdlTGlzdFZpZXcpIHtcbiAgICAgIGxldCBMYW5ndWFnZUxpc3RWaWV3ID0gcmVxdWlyZSgnLi9sYW5ndWFnZS1saXN0LXZpZXcnKVxuICAgICAgdGhpcy5sYW5ndWFnZUxpc3RWaWV3ID0gbmV3IExhbmd1YWdlTGlzdFZpZXcoKVxuICAgIH1cbiAgICB0aGlzLmxhbmd1YWdlTGlzdFZpZXcudG9nZ2xlKClcbiAgfSxcblxuICBhY3RpdmF0ZSAoKSB7XG4gICAgdGhpcy5kaXNwb3NhYmxlcyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKClcblxuICAgIGZ1bmN0aW9uIHdhcm4gKCkge1xuICAgICAgYXRvbS5ub3RpZmljYXRpb25zLmFkZFdhcm5pbmcoJ3NwZWxsLWNoZWNrIHBhY2thZ2UgaXMgZW5hYmxlZCcsXG4gICAgICB7IGRldGFpbDogJ3NwZWxsLWNoZWNrIGFuZCBsaW50ZXItc3BlbGwgd2lsbCBzcGVsbCBjaGVjayB0aGUgc2FtZVxcbmRvY3VtZW50cyBhbmQgc3BlbGwtY2hlY2sgd2lsbCBpbnRlcmZlcmUgd2l0aCBsaW50ZXItc3BlbGwuXFxuUGxlYXNlIGRpc2FibGUgdGhlIHNwZWxsLWNoZWNrIHBhY2thZ2UuIElmIHlvdSBkbyBub3Qgd2FudFxcbnRvIHNlZSB0aGlzIHdhcm5pbmcgeW91IGNhbiBkaXNhYmxlIGl0IGluIHRoZSBzZXR0aW5nc1xcbmZvciBsaW50ZXItc3BlbGwuJyB9KVxuICAgIH1cblxuICAgIGlmIChhdG9tLmNvbmZpZy5nZXQoJ2xpbnRlci1zcGVsbC5jaGVja0ZvclNwZWxsQ2hlY2snKSAmJiBhdG9tLnBhY2thZ2VzLmlzUGFja2FnZUFjdGl2ZSgnc3BlbGwtY2hlY2snKSkgd2FybigpXG5cbiAgICBhdG9tLnBhY2thZ2VzLm9uRGlkQWN0aXZhdGVQYWNrYWdlKHAgPT4geyBpZiAoYXRvbS5jb25maWcuZ2V0KCdsaW50ZXItc3BlbGwuY2hlY2tGb3JTcGVsbENoZWNrJykgJiYgcC5uYW1lID09PSAnc3BlbGwtY2hlY2snKSB3YXJuKCkgfSlcblxuICAgIGxldCBEaWN0aW9uYXJ5UHJvdmlkZXIgPSByZXF1aXJlKCcuL2RpY3Rpb25hcnktcHJvdmlkZXInKVxuICAgIGdsb2JhbC5kaWN0aW9uYXJ5UHJvdmlkZXIgPSBuZXcgRGljdGlvbmFyeVByb3ZpZGVyKClcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZChnbG9iYWwuZGljdGlvbmFyeVByb3ZpZGVyKVxuXG4gICAgbGV0IExhbmd1YWdlTWFuYWdlciA9IHJlcXVpcmUoJy4vbGFuZ3VhZ2UtbWFuYWdlcicpXG4gICAgZ2xvYmFsLmxhbmd1YWdlTWFuYWdlciA9IG5ldyBMYW5ndWFnZU1hbmFnZXIoKVxuICAgIHRoaXMuZGlzcG9zYWJsZXMuYWRkKGdsb2JhbC5sYW5ndWFnZU1hbmFnZXIpXG5cbiAgICBsZXQgR3JhbW1hck1hbmFnZXIgPSByZXF1aXJlKCcuL2dyYW1tYXItbWFuYWdlcicpXG4gICAgZ2xvYmFsLmdyYW1tYXJNYW5hZ2VyID0gbmV3IEdyYW1tYXJNYW5hZ2VyKClcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZChnbG9iYWwuZ3JhbW1hck1hbmFnZXIpXG5cbiAgICBsZXQgRGljdGlvbmFyeU1hbmFnZXIgPSByZXF1aXJlKCcuL2RpY3Rpb25hcnktbWFuYWdlcicpXG4gICAgZ2xvYmFsLmRpY3Rpb25hcnlNYW5hZ2VyID0gbmV3IERpY3Rpb25hcnlNYW5hZ2VyKClcbiAgICB0aGlzLmRpc3Bvc2FibGVzLmFkZChnbG9iYWwuZGljdGlvbmFyeU1hbmFnZXIpXG5cbiAgICBnbG9iYWwucHJvdmlkZXJzID0gcmVxdWlyZSgnLi9wcm92aWRlcnMnKVxuXG4gICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQoXG4gICAgICBhdG9tLmNvbW1hbmRzLmFkZCgnYXRvbS10ZXh0LWVkaXRvcicsXG4gICAgICAgICdsaW50ZXItc3BlbGw6c2hvdy1sYW5ndWFnZS1zZWxlY3RvcicsXG4gICAgICAgIHRoaXMuY3JlYXRlTGFuZ3VhZ2VMaXN0VmlldykpXG5cbiAgICByZXF1aXJlKCdhdG9tLXBhY2thZ2UtZGVwcycpLmluc3RhbGwoJ2xpbnRlci1zcGVsbCcpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBbGwgZGVwZW5kZW5jaWVzIGluc3RhbGxlZCwgZ29vZCB0byBnbycpXG4gICAgICB9KVxuICB9LFxuXG4gIGRlYWN0aXZhdGUgKCkge1xuICAgIHRoaXMuZGlzcG9zYWJsZXMuZGlzcG9zZSgpXG4gIH0sXG5cbiAgY29uc3VtZUdyYW1tYXIgKGdyYW1tYXJzKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5ncmFtbWFyTWFuYWdlci5jb25zdW1lR3JhbW1hcihncmFtbWFycylcbiAgfSxcblxuICBjb25zdW1lRGljdGlvbmFyeSAoZGljdGlvbmFyaWVzKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5kaWN0aW9uYXJ5TWFuYWdlci5jb25zdW1lRGljdGlvbmFyeShkaWN0aW9uYXJpZXMpXG4gIH0sXG5cbiAgY29uc3VtZUxpbnRlciAobGludGVyKSB7XG4gICAgZ2xvYmFsLmxpbnRlciA9IGxpbnRlclxuICAgIHJldHVybiBuZXcgRGlzcG9zYWJsZSgoKSA9PiB7IGdsb2JhbC5saW50ZXIgPSBudWxsIH0pXG4gIH0sXG5cbiAgY29uc3VtZVN0YXR1c0JhciAoc3RhdHVzQmFyKSB7XG4gICAgY29uc3QgTGFuZ3VhZ2VTdGF0dXNWaWV3ID0gcmVxdWlyZSgnLi9sYW5ndWFnZS1zdGF0dXMtdmlldycpXG4gICAgbGV0IGxhbmd1YWdlU3RhdHVzVmlldyA9IG5ldyBMYW5ndWFnZVN0YXR1c1ZpZXcoKVxuICAgIGxhbmd1YWdlU3RhdHVzVmlldy5pbml0aWFsaXplKHN0YXR1c0JhcilcbiAgICByZXR1cm4gbmV3IERpc3Bvc2FibGUoKCkgPT4ge1xuICAgICAgbGFuZ3VhZ2VTdGF0dXNWaWV3LmRlc3Ryb3koKVxuICAgIH0pXG4gIH0sXG5cbiAgcHJvdmlkZUdyYW1tYXIgKCkge1xuICAgIHJldHVybiBnbG9iYWwucHJvdmlkZXJzLnByb3ZpZGVHcmFtbWFyKClcbiAgfSxcblxuICBwcm92aWRlRGljdGlvbmFyeSAoKSB7XG4gICAgbGV0IHdvcmRMaXN0ID0gcmVxdWlyZSgnbGludGVyLXNwZWxsLXdvcmQtbGlzdCcpXG5cbiAgICBsZXQgd29yZExpc3RzID0gW3tcbiAgICAgIG5hbWU6ICdwbGFpbiB0ZXh0JyxcbiAgICAgIGtleVBhdGg6ICdsaW50ZXItc3BlbGwucGxhaW5UZXh0V29yZHMnLFxuICAgICAgZ3JhbW1hclNjb3BlczogW1xuICAgICAgICAndGV4dC5wbGFpbicsXG4gICAgICAgICd0ZXh0LnBsYWluLm51bGwtZ3JhbW1hcidcbiAgICAgIF1cbiAgICB9LCB7XG4gICAgICBuYW1lOiAnR0lUIGNvbW1pdCcsXG4gICAgICBrZXlQYXRoOiAnbGludGVyLXNwZWxsLmdpdENvbW1pdFdvcmRzJyxcbiAgICAgIGdyYW1tYXJTY29wZXM6IFtcbiAgICAgICAgJ3RleHQuZ2l0LWNvbW1pdCdcbiAgICAgIF1cbiAgICB9LCB7XG4gICAgICBuYW1lOiAnQXNjaWlEb2MnLFxuICAgICAga2V5UGF0aDogJ2xpbnRlci1zcGVsbC5hc2NpaURvY1dvcmRzJyxcbiAgICAgIGdyYW1tYXJTY29wZXM6IFtcbiAgICAgICAgJ3NvdXJjZS5hc2NpaWRvYydcbiAgICAgIF1cbiAgICB9LCB7XG4gICAgICBuYW1lOiAnTWFya2Rvd24nLFxuICAgICAga2V5UGF0aDogJ2xpbnRlci1zcGVsbC5tYXJrZG93bldvcmRzJyxcbiAgICAgIGdyYW1tYXJTY29wZXM6IFtcbiAgICAgICAgJ3NvdXJjZS5nZm0nLFxuICAgICAgICAndGV4dC5tZCdcbiAgICAgIF1cbiAgICB9XVxuXG4gICAgcmV0dXJuIF8uY29uY2F0KFxuICAgICAgW2dsb2JhbC5kaWN0aW9uYXJ5UHJvdmlkZXIucHJvdmlkZURpY3Rpb25hcnkoKV0sXG4gICAgICBfLm1hcCh3b3JkTGlzdHMsIG9wdCA9PiB7XG4gICAgICAgIGxldCBhID0gbmV3IHdvcmRMaXN0LkNvbmZpZ1dvcmRMaXN0KG9wdClcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlcy5hZGQoYSlcbiAgICAgICAgcmV0dXJuIGEucHJvdmlkZURpY3Rpb25hcnkoKVxuICAgICAgfSkpXG4gIH0sXG5cbiAgcHJvdmlkZUxpbnRlciAoKSB7XG4gICAgcmV0dXJuIGdsb2JhbC5wcm92aWRlcnMucHJvdmlkZUxpbnRlcigpXG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBNYWluXG4iXX0=